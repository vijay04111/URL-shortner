<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>URL Shortener</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<style>
body { background: linear-gradient(135deg, #eef2f3, #ffffff); }
.card { border-radius: 14px; }
.table-hover tbody tr:hover { background-color: #f1f5ff; transition: 0.3s; }
.badge { font-size: 0.9rem; }
.url-box { word-break: break-all; }
</style>
</head>

<body>

<nav class="navbar navbar-dark bg-dark shadow-sm mb-4">
<div class="container">
<span class="navbar-brand fw-bold"><i class="bi bi-link-45deg"></i> URL Shortener</span>
</div>
</nav>

<div class="container">

<% if (locals.id) { %>
<div class="alert alert-success d-flex justify-content-between align-items-center shadow-sm">
<div>
<i class="bi bi-check-circle-fill"></i>
<strong class="ms-1">Short URL Generated</strong>
</div>
<a class="fw-semibold" href="http://localhost:8001/url/<%= id %>" target="_blank">
http://localhost:8001/url/<%= id %>
</a>
</div>
<% } %>

<div class="card shadow mb-4">
<div class="card-header bg-primary text-white fw-semibold">
<i class="bi bi-magic"></i> Generate Short URL
</div>
<div class="card-body">
<form action="/url" method="post" class="row g-3">
<div class="col-md-9">
<label class="form-label fw-semibold">Enter Redirect URL</label>
<input type="text" name="url" class="form-control form-control-lg" placeholder="https://www.google.com" required>
</div>
<div class="col-md-3 d-flex align-items-end">
<button type="submit" class="btn btn-success btn-lg w-100">
<i class="bi bi-scissors"></i> Generate
</button>
</div>
</form>
</div>
</div>

<div class="card shadow">
<div class="card-header bg-dark text-white fw-semibold">
<i class="bi bi-table"></i> All Shortened URLs
</div>
<div class="card-body table-responsive">
<table class="table table-bordered table-hover align-middle">
<thead class="table-light text-center">
<tr>
<th>#</th>
<th>Short ID</th>
<th>Redirect URL</th>
<th>Clicks</th>
</tr>
</thead>
<tbody>
<% urls.forEach((url, index) => { %>
<tr>
<td class="text-center fw-semibold"><%= index + 1 %></td>
<td class="text-primary fw-bold"><%= url.shortId %></td>
<td class="url-box text-muted"><%= url.redirectURL %></td>
<td class="text-center">
<span class="badge bg-success rounded-pill px-3">
<i class="bi bi-bar-chart"></i> <%= url.visitHistory.length %>
</span>
</td>
</tr>
<% }) %>
</tbody>
</table>
</div>
</div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
